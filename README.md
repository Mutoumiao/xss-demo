## Web安全之模拟XSS攻击
**理解XSS的攻击方式**
- 反射型
> 发出请求是,XSS代码出现在URL中,作为输入提交到服务器端,服务器端解析后响应,XSS代码随着响应内容一起传回浏览器,最后浏览器解析执行XSS代码。这个过程像一次反射,故叫做反射型XSS。
- 存储型
> 存储型XSS和反射型XSS的差别在于,提交的代码会存储在服务器中(例如数据库,内存,文件系统等),下次请求页面是不用再提交XSS代码。

### XSS攻击防御措施
#### 编码
> 我们不能对用户的所有输入保持原样，我们要经过一步的处理，也就是编码 
1. 对用户输入的数据进行HTML Entity 编码（大概意思为转义编码）
#### 过滤
> 编码的基础上，在我们原样显示用户内容的时候，我们要经过过滤，这个过滤就是把那些输入不合法的东西统统过滤掉，这样保证我们的安全性
1. 移除用户上传的DOM属性， 如onerrr等
2. 移除用户上传的Style节点， Script节点， Iframe节点等
#### 校正
>如果当XSS代码破坏掉页面的结构等等时，因此通过校正的方式避免恶意破坏一些DOM结构
1. 避免直接对HTML Entiy解码
2. 使用DOM Parse转换，校正不配对的DOM标签